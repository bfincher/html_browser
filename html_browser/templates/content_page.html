{% extends "page.html" %}
{% load url_resolver %}

{% block additional_header %} 
		<script type="text/javascript" src="{{ MEDIA_URL }}folder_content.js"></script>

		<script>
				setCurrentFolder('{{ currentFolder }}')
				setCurrentPath('{{ currentPath }}')
				setUserCanRead({{ userCanRead }})
				setUserCanWrite({{ userCanWrite }})
				setUserCanDelete({{ userCanDelete }})
				setUploadUrl("{% get_content_url viewName='upload' %}");
				setDownloadZipUrl("{% get_content_url viewName='downloadZip' %}");
		</script>

		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script type="text/javascript">
		  google.load("visualization", "1", {packages:["corechart"]});
		  google.setOnLoadCallback(drawChart);
		  function drawChart() {
			var data = google.visualization.arrayToDataTable([
			  ['Category', 'Percentage'],
			  ['Used',	   {{ diskUsed }}],
			  ['Free',	   {{ diskFree }}]
			]);

			var options = {
			  title: 'Disk Usage for {{ currentFolder }} in {{ diskUnit }}'
			};

			var chart = new google.visualization.PieChart(document.getElementById('disk_usage_content'));
			chart.draw(data, options);
		  }
		</script>

<div id="disk_usage">
	<div id="disk_usage_content"></div>
	<a href="javascript:diskUsageHidePopup()">hide</a>
</div>
{% endblock %}


{% block body %}
	{% include "content_bar.html" %}
	<form id="content-form" method="post">
		{% csrf_token %}
		<input type="hidden" name="currentFolder" value="{{ currentFolder }}" />
		<input type="hidden" name="currentPath" value="{{ currentPath }}" />
	{% block content %}{% endblock %}
	</form>

	{% if currentDirEntries|length > 20 %}
		{% include "content_bar.html" %}
	{% endif %}
{% endblock %}
