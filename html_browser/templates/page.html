<html>
{% block header %} 
<head>
    <meta content="initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" name="viewport">
    <title>HTML File Explorer</title>

    <script src="{{ const.MEDIA_URL }}base.js"></script>
    <script type="text/javascript">
        setBaseUrl("{{ const.BASE_URL }}");
        setMediaUrl("{{ const.MEDIA_URL }}");        
        setImageUrl("{{ const.IMAGE_URL }}");

    </script>

    <link rel="stylesheet" href="{{ const.MEDIA_URL }}/html_browser.css" type="text/css" media="screen" title="no title" charset="utf-8">

    <link rel="stylesheet" href="{{ const.MEDIA_URL }}bootstrap/css/bootstrap.min.css">
    <link href="{{ const.MEDIA_URL }}pretify.css" rel="stylesheet">
    <style type="text/css">
            body {
                    padding-top: 60px;
                    padding-bottom: 40px;
            }
    </style>

    <script type="text/javascript" src="{{ const.MEDIA_URL }}folder_content.js"></script>
</head>
{% endblock %} 
{% block additional_header %} {% endblock %}

<body>		
    {% block navbar %}
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{{ const.BASE_URL }}">HTML File Explorer</a>
        </div>
      <div id="navbar" class="navbar-collapse collapse">
         <ul class="nav navbar-nav">
           {% if user.is_authenticated %}
             {% if user.is_staff %}
               <li class="active"><a href="{{ const.BASE_URL }}hbAdmin">Administration</a></li>
             {% endif %}

             {% if showContent %}
               <li class="dropdown">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Filter <span class="caret"></span></a>
                 <span class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                   <center>
                     <h3>Apply a filter</h3>
                     <form method="post" action="{{ const.CONTENT_URL }}"> {% csrf_token %}
                       <input type="text" name="filter" value="{{ filter }}" maxlength="20" size="10" />
                       <input type="hidden" name="currentFolder" value="{{ currentFolder }}" />
                       <input type="hidden" name="currentPath" value="{{ currentPath }}" />
                       <input class="btn btn-default" type="submit" value="Filter" name="Filter" />
                     </form>
                   </center>
                 </span>
               </li>
               <li class="dropdown" data-dropdown="dropdown">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search <b class="caret"></b></a>
                 <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                   <center>
                     <h3>Search for filenames</h3>
                     <form method="post" action="{{ const.CONTENT_URL }}"> {% csrf_token %}
                       <input type="text" name="search" value="{{ search }}" maxlength="20" size="10" />
                       <input type="hidden" name="currentFolder" value="{{ currentFolder }}" />
                       <input type="hidden" name="currentPath" value="{{ currentPath }}" />
                       <input class="btn btn-default" type="submit" value="Search" name="Search" />
                     </form>
                   </center>
                 </div>
               </li>
               <li class="dropdown" data-dropdown="dropdown">
                 <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings <b class="caret"></b></a>
                 <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                   <center>
                     <h3>Settings</h3>
                     <form action="post" action="{{ const.CONTENT_url }}"> {% csrf_token %}
                       <input type="hidden" name="action" value="changeSettings" />
                       <input type="hidden" name="currentFolder" value="{{ currentFolder }}" />
                       <input type="hidden" name="currentPath" value="{{ currentPath }}" />
                       <input type="checkbox" name="showHidden" 
                       {% if showHidden %}checked="checked" {% endif %}
                       />&nbsp;Show Hidden Files / Folders
                       <br>
                       <input class="btn" id="Save" name="submit" type="submit" value="Save" />
                       &nbsp;&nbsp;
                       <input class="btn" id="Cancel" name="submit" type="submit" value="Cancel" />
                     </form>
                   </center>
                 </div>
               </li>
             </ul>
           {% endif %} <!-- if showContent -->
         {% endif %} <!-- if user is authenticated -->
           </ul>
         <div class="small">
           {% if user.is_authenticated %}
             <ul class="nav navbar-nav navbar-right" >
               <li class="active"><a href="#" > {{ user.username }} </a> </li>
               <li class="active"><a href="{{ const.BASE_URL }}hbChangePassword" >Change Password </a></li>
               <li class="active"><a href="{{ const.BASE_URL }}hbLogout/" >Log Out  </a></li>
             </ul>
           {% else %}
             <form class="navbar-form navbar-right" action="{{ const.BASE_URL }}hbLogin/" method="post" > {% csrf_token %}
               <input class="form-control" name="userName" type="text" placeholder="User Name">
               <input class="form-control" name="password" type="password" placeholder="Password">
               <button type="submit" class="btn btn-success">Sign in</button>
               <input name="action" type="hidden" value="login" >
            </form>
           {% endif %}
         </div>

      </div>
      </div>
    </div>
    {% endblock %}
    {% block navbar2 %}
    {% if breadcrumbs %}
    {% autoescape off %}
    <div class="breadcrumbs">
        {{ breadcrumbs }}
    </div>
    {% endautoescape %}
    {% endif %}
    {% endblock %}

    {% block navbar3 %}
    {% endblock %}


    {% if errorText != None %}
    <div id="error"> {{ errorText }}</div><br>
    {% endif %}

{% block body %} {% endblock %}

{% block body2 %} {% endblock %}

 <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ const.MEDIA_URL }}jquery-1.11.3.min.js"></script>
    <script src="{{ const.MEDIA_URL }}bootstrap/js/bootstrap.min.js"></script>
{% block extra_js %} {% endblock %}
</body>
</html>
